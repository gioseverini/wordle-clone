<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wordle Clone</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 1rem;
      margin: 0;
      background-color: #121213;
      color: white;
    }
    h1 { color: #6aaa64; }
    #board { display: grid; grid-template-columns: repeat(5, 60px); gap: 10px; margin: 1rem 0; }
    .tile {
      width: 60px;
      height: 60px;
      background: #3a3a3c;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-weight: bold;
      text-transform: uppercase;
      border: 2px solid #3a3a3c;
    }
    .tile.filled {
      border: 2px solid #565758;
    }
    .correct { background-color: #6aaa64 !important; border-color: #6aaa64 !important; }
    .present { background-color: #c9b458 !important; border-color: #c9b458 !important; }
    .absent { background-color: #787c7e !important; border-color: #787c7e !important; }
    #keyboard { display: grid; grid-template-columns: repeat(10, 1fr); gap: 5px; margin-top: 1rem; max-width: 500px; }
    .key {
      padding: 0.8rem;
      font-size: 1.2rem;
      background: #818384;
      color: white;
      border: none;
      border-radius: 5px;
      text-transform: uppercase;
      cursor: pointer;
    }
    .key:hover { background: #565758; }
    .key:active { background: #4a4a4c; }
    .key.correct { background-color: #6aaa64 !important; }
    .key.present { background-color: #c9b458 !important; }
    .key.absent { background-color: #3a3a3c !important; }
    .row-break { grid-column: span 10; height: 5px; }
    .key.wide { grid-column: span 2; }
    #stats { margin-top: 1rem; text-align: center; }
    #play-again {
      display: none;
      margin-top: 1rem;
      padding: 0.6rem 1.2rem;
      font-size: 1.1rem;
      background-color: #6aaa64;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #play-again:hover { background-color: #5a9a54; }
    #message {
      margin-top: 1rem;
      text-align: center;
      font-size: 1.1rem;
      min-height: 30px;
    }
  </style>
</head>
<body>
  <h1>Wordle Clone</h1>
  <div id="board"></div>
  <div id="keyboard"></div>
  <div id="message"></div>
  <div id="stats"></div>
  <button id="play-again" onclick="location.reload()">Play Again</button>

  <script>
    const wordList = [
      "aback", "abase", "abate", "abbey", "abbot", "abhor", "abide", "abled", "abode", "abort",
      "about", "above", "abuse", "abyss", "acorn", "acrid", "actor", "acute", "adage", "adapt",
      "admit", "adopt", "adult", "after", "again", "agent", "agree", "ahead", "alarm", "album",
      "alert", "alien", "align", "alike", "alive", "allow", "alone", "along", "alter", "amaze",
      "amber", "amend", "among", "ample", "angel", "anger", "angle", "angry", "apart", "apple",
      "apply", "arena", "argue", "arise", "armed", "armor", "array", "arrow", "aside", "asset",
      "atlas", "audio", "audit", "avoid", "awake", "award", "aware", "badly", "baker", "bases",
      "basic", "batch", "beach", "beard", "beast", "began", "begin", "being", "belly", "below",
      "bench", "berry", "bikes", "birth", "black", "blade", "blame", "blank", "blast", "bleed",
      "bless", "blind", "block", "blood", "bloom", "blown", "blues", "blunt", "blush", "board",
      "boast", "bonus", "boost", "booth", "bound", "boxer", "brain", "brake", "brand", "brass",
      "brave", "bread", "break", "breed", "brick", "bride", "brief", "bring", "broad", "broke",
      "brown", "brush", "build", "built", "bunch", "burst", "buyer", "cable", "cache", "candy",
      "canoe", "canon", "cards", "carry", "carve", "catch", "cause", "chain", "chair", "chaos",
      "charm", "chart", "chase", "cheap", "check", "chest", "chief", "child", "chips", "chose",
      "civil", "claim", "class", "clean", "clear", "clerk", "click", "cliff", "climb", "clock",
      "close", "cloud", "clown", "clubs", "coach", "coast", "could", "count", "court", "cover",
      "craft", "crash", "crazy", "cream", "crime", "crisp", "cross", "crowd", "crown", "crude",
      "curve", "cyber", "cycle", "daily", "dance", "dated", "dealt", "death", "debut", "delay",
      "depth", "doing", "doubt", "dozen", "draft", "drama", "drank", "dream", "dress", "drill",
      "drink", "drive", "drove", "dying", "eager", "early", "earth", "eight", "elite", "empty",
      "enemy", "enjoy", "enter", "entry", "equal", "error", "event", "every", "exact", "exist",
      "extra", "faith", "false", "fault", "fiber", "field", "fifth", "fifty", "fight", "final",
      "first", "fixed", "flash", "fleet", "flesh", "floor", "fluid", "focus", "force", "forth",
      "forty", "forum", "found", "frame", "frank", "fraud", "fresh", "front", "fruit", "fully",
      "funny", "giant", "given", "glass", "globe", "glory", "goods", "grace", "grade", "grain",
      "grand", "grant", "grass", "grave", "great", "green", "gross", "group", "grown", "guard",
      "guess", "guest", "guide", "happy", "harsh", "haste", "heart", "heavy", "hence", "honor",
      "hoped", "horse", "hotel", "house", "human", "humor", "hurry", "ideal", "image", "imply",
      "index", "inner", "input", "issue", "japan", "jimmy", "joint", "jones", "judge", "known",
      "label", "large", "laser", "later", "laugh", "layer", "learn", "lease", "least", "leave",
      "legal", "level", "lewis", "light", "limit", "links", "lists", "lived", "liver", "loads",
      "loans", "local", "logic", "loose", "lower", "lucky", "lunch", "lying", "magic", "major",
      "maker", "march", "maria", "match", "maybe", "mayor", "meant", "media", "metal", "might",
      "minor", "minus", "mixed", "model", "money", "month", "moral", "motor", "mount", "mouse",
      "mouth", "moved", "movie", "music", "needs", "never", "newly", "night", "noise", "north",
      "noted", "novel", "nurse", "occur", "ocean", "offer", "often", "order", "other", "ought",
      "paint", "panel", "paper", "party", "peace", "peter", "phase", "phone", "photo", "piano",
      "piece", "pilot", "pitch", "place", "plain", "plane", "plant", "plate", "plays", "plaza",
      "point", "pound", "power", "press", "price", "pride", "prime", "print", "prior", "prize",
      "proof", "proud", "prove", "queen", "quick", "quiet", "quite", "radio", "raise", "range",
      "rapid", "ratio", "reach", "ready", "realm", "rebel", "refer", "relax", "repay", "reply",
      "right", "rigid", "rival", "river", "robot", "roger", "roman", "rough", "round", "route",
      "royal", "rural", "scale", "scene", "scope", "score", "sense", "serve", "setup", "seven",
      "shall", "shape", "share", "sharp", "sheet", "shelf", "shell", "shift", "shine", "shirt",
      "shock", "shoot", "short", "shown", "sides", "sight", "signs", "silly", "since", "sixth",
      "sixty", "sized", "skill", "skin", "sleep", "slide", "small", "smart", "smile", "smith",
      "smoke", "snake", "snow", "socks", "solar", "solid", "solve", "sorry", "sorts", "sound",
      "south", "space", "spare", "speak", "speed", "spend", "spent", "split", "spoke", "sport",
      "staff", "stage", "stake", "stand", "start", "state", "stays", "steam", "steel", "steep",
      "steer", "steps", "still", "stock", "stone", "stood", "store", "storm", "story", "strip",
      "stuck", "study", "stuff", "style", "sugar", "suite", "super", "sweet", "swift", "swing",
      "swiss", "table", "taken", "tales", "talks", "tanks", "tape", "taste", "taxes", "teach",
      "teams", "tears", "teens", "teeth", "terry", "texas", "thank", "theft", "their", "theme",
      "there", "these", "thick", "thing", "think", "third", "those", "three", "threw", "throw",
      "thumb", "tiger", "tight", "tiles", "timer", "times", "tired", "title", "toast", "today",
      "token", "tools", "tooth", "topic", "total", "touch", "tough", "tower", "track", "trade",
      "train", "trait", "trash", "treat", "trend", "trial", "tribe", "trick", "tried", "tries",
      "truck", "truly", "trunk", "trust", "truth", "trying", "tubes", "tune", "turns", "twelve",
      "twenty", "twice", "twins", "twist", "types", "uncle", "under", "undue", "union", "unity",
      "until", "upper", "upset", "urban", "usage", "users", "using", "usual", "valid", "value",
      "video", "virus", "visit", "vital", "vocal", "voice", "waste", "watch", "water", "waves",
      "ways", "wealth", "weird", "welcome", "wells", "whale", "wheat", "wheel", "where", "which",
      "while", "white", "whole", "whose", "wider", "wife", "willing", "winds", "wines", "wings",
      "wiped", "wired", "wisdom", "witch", "woman", "women", "world", "worry", "worse", "worst",
      "worth", "would", "wound", "woven", "write", "wrong", "wrote", "years", "yellow", "young",
      "yours", "youth", "zones"
    ];

    let target = wordList[Math.floor(Math.random() * wordList.length)].toLowerCase();
    let board = document.getElementById("board");
    let keyboard = document.getElementById("keyboard");
    let statsDiv = document.getElementById("stats");
    let messageDiv = document.getElementById("message");
    let playAgainBtn = document.getElementById("play-again");
    let currentGuess = "";
    let guessCount = 0;
    let gameOver = false;
    let keyboardState = {}; // Track keyboard key states

    // Use in-memory storage instead of localStorage
    let stats = { wins: 0, losses: 0 };

    function updateStatsDisplay() {
      statsDiv.innerHTML = `Wins: ${stats.wins} | Losses: ${stats.losses}`;
    }

    function showMessage(text, duration = 2000) {
      messageDiv.textContent = text;
      if (duration > 0) {
        setTimeout(() => messageDiv.textContent = "", duration);
      }
    }

    function createGrid() {
      for (let r = 0; r < 6; r++) {
        for (let c = 0; c < 5; c++) {
          const tile = document.createElement("div");
          tile.classList.add("tile");
          tile.id = `tile-${r}-${c}`;
          board.appendChild(tile);
        }
      }
    }

    function updateBoardInput() {
      for (let i = 0; i < 5; i++) {
        const tile = document.getElementById(`tile-${guessCount}-${i}`);
        const letter = currentGuess[i] || "";
        tile.textContent = letter;
        if (letter) {
          tile.classList.add("filled");
        } else {
          tile.classList.remove("filled");
        }
      }
    }

    function updateKeyboard(letter, status) {
      // Only update if this is a better status (correct > present > absent)
      const statusPriority = { correct: 3, present: 2, absent: 1 };
      const currentStatus = keyboardState[letter] || "";
      
      if (!currentStatus || statusPriority[status] > statusPriority[currentStatus]) {
        keyboardState[letter] = status;
        const keyElement = document.querySelector(`[data-key="${letter}"]`);
        if (keyElement) {
          keyElement.classList.remove("correct", "present", "absent");
          keyElement.classList.add(status);
        }
      }
    }

    function revealGuess() {
      const targetLetters = target.split('');
      const guessLetters = currentGuess.split('');
      const result = new Array(5).fill('absent');
      const targetCounts = {};
      
      // Count letters in target
      targetLetters.forEach(letter => {
        targetCounts[letter] = (targetCounts[letter] || 0) + 1;
      });
      
      // First pass: mark correct letters
      for (let i = 0; i < 5; i++) {
        if (guessLetters[i] === targetLetters[i]) {
          result[i] = 'correct';
          targetCounts[guessLetters[i]]--;
        }
      }
      
      // Second pass: mark present letters
      for (let i = 0; i < 5; i++) {
        if (result[i] === 'absent' && targetCounts[guessLetters[i]] > 0) {
          result[i] = 'present';
          targetCounts[guessLetters[i]]--;
        }
      }
      
      // Apply colors immediately - no animation delay for now
      for (let i = 0; i < 5; i++) {
        const tile = document.getElementById(`tile-${guessCount}-${i}`);
        tile.classList.remove('correct', 'present', 'absent'); // Remove any existing classes
        tile.classList.add(result[i]);
        updateKeyboard(guessLetters[i], result[i]);
      }
    }

    function endGame(message, isWin = false) {
      gameOver = true;
      if (isWin) {
        stats.wins++;
      } else {
        stats.losses++;
      }
      updateStatsDisplay();
      showMessage(message, 0);
      playAgainBtn.style.display = "block";
    }

    function submitGuess() {
      if (currentGuess.length !== 5) {
        showMessage("Enter a 5-letter word");
        return;
      }
      
      if (!wordList.includes(currentGuess)) {
        showMessage("Invalid word");
        return;
      }
      
      if (guessCount >= 6 || gameOver) return;

      revealGuess();
      guessCount++;
      
      if (currentGuess === target) {
        return setTimeout(() => endGame("ðŸŽ‰ Congratulations! You found the word!", true), 300);
      }
      
      if (guessCount === 6) {
        return setTimeout(() => endGame(`Game Over! The word was: ${target.toUpperCase()}`), 300);
      }
      
      currentGuess = "";
      updateBoardInput();
    }

    function pressKey(letter) {
      if (gameOver) return;

      if (letter === "enter") {
        submitGuess();
      } else if (letter === "del") {
        currentGuess = currentGuess.slice(0, -1);
        updateBoardInput();
      } else if (currentGuess.length < 5 && /^[a-z]$/.test(letter)) {
        currentGuess += letter;
        updateBoardInput();
      }
    }

    function createKeyboard() {
      const rows = [
        ["q","w","e","r","t","y","u","i","o","p"],
        ["a","s","d","f","g","h","j","k","l"],
        ["enter","z","x","c","v","b","n","m","del"]
      ];

      rows.forEach((row, rowIndex) => {
        row.forEach(key => {
          const button = document.createElement("button");
          button.textContent = key === "del" ? "âŒ«" : key === "enter" ? "enter" : key;
          button.className = "key";
          if (key === "enter" || key === "del") {
            button.classList.add("wide");
          }
          button.setAttribute("data-key", key);
          button.onclick = () => pressKey(key);
          keyboard.appendChild(button);
        });
        
        if (rowIndex < rows.length - 1) {
          const br = document.createElement("div");
          br.className = "row-break";
          keyboard.appendChild(br);
        }
      });
    }

    // Keyboard event listener
    document.addEventListener("keydown", (e) => {
      const key = e.key.toLowerCase();
      if (key === "enter") {
        pressKey("enter");
      } else if (key === "backspace") {
        pressKey("del");
      } else if (/^[a-z]$/.test(key)) {
        pressKey(key);
      }
    });

    // Initialize game
    createGrid();
    createKeyboard();
    updateStatsDisplay();
    console.log("Target word:", target); // For testing - remove in production
  </script>
</body>
</html>
